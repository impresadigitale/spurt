<!--REACTIVE FORM-->
<form novalidate [formGroup]="user">
    <div class="col-12">
        <div class="breadcrumbs-row noborder">
            <div class="bc-col">
                <ul>
                    <li><a href="javascript:void(0)" [routerLink]="['/catalog/product']">
                            {{'catalog.product.Products'| translate}} </a></li>
                    <li> {{'catalog.product.AddProduct'| translate}}</li>
                </ul>
            </div>
            <div class="bc-col-btn ap-col-btn">
                <button class="btn btn-save" (click)="onSubmit(user.value)"><img src="assets/img/tick-round-white.png">
                    {{'catalog.product.Save'| translate}}
                </button>
                <button class="btn btn-cancel" [routerLink]="['/catalog/product']" [queryParams]="filterParams"><img
                        src="assets/img/close-white-ico.png">
                    {{'catalog.product.Cancel'| translate}}
                </button>
            </div>
        </div>
    </div>

    <!--Breadcrumbs-->
    <div class="flex addproduct-wrap">
        <div class="card ap-general">
            <div class="ap-header">
                <span> 1 </span>{{'catalog.product.General'| translate}}
            </div>
            <div class="flex ap-body">

                <!-- Col -->
                <div class="ap-body-col">
                    <div class="form-group">
                        <label>{{'catalog.product.ProductsName'| translate}} <sup>*</sup></label>
                        <input type="text" class="form-control"
                            placeholder="{{'catalog.product.ProductsName'| translate}}" formControlName="productName"
                            [ngClass]="{'validationcolor':user.controls.productName.errors&&submittedValues==true}">

                        <div class="validation-error"
                            *ngIf="user.get('productName').hasError('required') && user.get('productName').touched&&submittedValues==true">
                            {{'catalog.Error.ProductNameRequired'| translate}}
                        </div>
                        <div class="validation-error" *ngIf="user.get('productName').hasError('maxlength')">
                          Must be maximum 255 characters long
                       </div>

                    </div>
                </div>
                <!--Col-->
                <div class="ap-body-col">
                    <div class="form-group">
                        <label> {{'catalog.product.Sku'| translate}}<sup>*</sup></label>
                        <input type="text" class="form-control" placeholder="{{'catalog.product.SkuNumber'| translate}}"
                            formControlName="sku"
                            [ngClass]="{'validationcolor':user.get('sku').hasError('required') && user.get('sku').touched&&submittedValues==true}">
                        <div class="validation-error"
                            *ngIf="user.get('sku').hasError('required') && user.get('sku').touched&&submittedValues==true">
                            {{'catalog.Error.skuRequired'| translate}}
                        </div>
                        <div class="validation-error" *ngIf="user.get('sku').hasError('maxlength')">
                            Must be maximum 64 characters long
                         </div>

                    </div>
                </div>
                <!--Col-->
                <div class="ap-body-col">
                    <div class="form-group">
                        <label>Product Slug
                            <button type="button" class="btn" placement="right"
                                ngbTooltip="Enter product slug title for the product.">
                                <img src="assets/img/info-ico.png"></button></label>
                        <input type="text" class="form-control" placeholder="Product Slug" formControlName="productSlug"
                            [ngClass]="{validationcolor:user.controls.productSlug.errors}" />
                          <div class="validation-error" *ngIf="user.get('productSlug').hasError('maxlength')">
                            Must be maximum 255 characters long
                         </div>
                    </div>
                </div>

                <!--Col-->
                <div class="ap-body-col width100">
                    <div class="form-group">
                        <label>{{'catalog.product.ProductsDescriptions'| translate}}</label>
                        <ckeditor formControlName="productDescription">
                        </ckeditor>
                    </div>
                </div>


            </div>
        </div>
        <!--General-->

        <div class="card ap-general ap-info">
            <div class="ap-header">
                <span> 2 </span>{{'catalog.product.MoreInformation'| translate}}
            </div>
            <div class="flex ap-body">
                <ngb-tabset style="width:100%;">
                    <ngb-tab>
                        <ng-template ngbTabTitle>{{'catalog.product.Categories'| translate}}</ng-template>
                        <ng-template ngbTabContent>
                            <div class="flex categories-row">
                                <div class="categories-col">
                                    <h3>{{'catalog.product.AvailableCategories'| translate}}</h3>
                                    <div class="form-group search-categories">

                                        <form class="example-form">
                                            <mat-form-field class="example-full-width" style="    width: 100%;">
                                                <input type="text" placeholder="" [(ngModel)]="searchText"
                                                    [ngModelOptions]="{standalone: true}" matInput>
                                            </mat-form-field>
                                        </form>
                                    </div>

                                    <ul class="flex category-list over-flowx">

                                        <li *ngFor="let arr of (categoriessandbox.getCategoriesList$ | async)  | filter : searchText;let i=index"
                                            (click)="selectCategory(arr,i)" style="cursor: pointer">
                                            <a href="javascript:void(0)"><img src="assets/img/add-green-ico.png">
                                            </a>
                                            {{arr.levels}}
                                        </li>
                                    </ul>
                                </div>
                                <!---->
                                <div class="categories-col">
                                    <h3>{{'catalog.product.SelectedCategories'| translate}}</h3>
                                    <div class="form-group search-categories">

                                        <form class="example-form">
                                            <mat-form-field class="example-full-width" style="    width: 100%;">
                                                <input type="text" placeholder="" aria-label="Assignee" matInput
                                                    (keyup)="searchSelectedCategory($event.target.value)">
                                            </mat-form-field>
                                        </form>


                                        <ul class="flex category-list over-flowx" *ngIf="editId"
                                            style="cursor: pointer">
                                            <span>
                                                <li *ngFor="let data of selectedCategories;let i=index"
                                                    (click)="removeCategory(data,i)"><a href="javascript:void(0)"> <img
                                                            src="assets/img/minus-red-ico.png"> </a>
                                                    {{data.levels}}</li>
                                            </span>

                                        </ul>
                                        <ul class="flex category-list " *ngIf="!editId && show!=true"
                                            style="cursor: pointer">
                                            <span>
                                                <li *ngFor="let selected of selectedCategories;let i=index"
                                                    (click)="removeCategory(selected,i)"><a href="javascript:void(0)">
                                                        <img src="assets/img/minus-red-ico.png"> </a> {{selected.levels}}
                                                </li>
                                            </span>

                                        </ul>
                                        <ul class="flex category-list " *ngIf="!editId && show==true"
                                            style="cursor: pointer">
                                            <span>
                                                <li *ngFor="let selected of filteredArray;let i=index"
                                                    (click)="removeCategory(selected,i)"><a href="javascript:void(0)">
                                                        <img src="assets/img/minus-red-ico.png"> </a> {{selected.name}}
                                                </li>
                                            </span>
                                        </ul>

                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <!-- Tab1 -->
                    <ngb-tab id="6">
                        <ng-template ngbTabTitle> {{'catalog.product.Data'| translate}}</ng-template>
                        <ng-template ngbTabContent>
                            <div class="flex data-row">
                          
                                <!--Col-->
                                <div class="data-col">
                                    <div class="form-group">
                                        <label>{{'catalog.product.Upc'| translate}}</label>
                                        <input appOnlyNumber type="text" class="form-control"
                                            placeholder="{{'catalog.product.Upc'| translate}}" formControlName="upc"
                                            [ngClass]="{'validationcolor':user.get('upc').errors && submittedValues==true}">
                                            <div class="validation-error" *ngIf="user.get('upc').hasError('maxlength') && submittedValues==true">
                                                Must be maximum 12 characters long
                                            </div>
                                    </div>
                                </div>
                                <!-- col -->
                                <div class="data-col">
                                    <div class="form-group">
                                        <label>HSN</label>
                                        <input type="text" class="form-control"
                                        [ngClass]="{'validationcolor':user.get('hsn').errors && submittedValues==true}"
                                            placeholder="HSN" formControlName="hsn">
                                            <div class="validation-error" *ngIf="user.get('hsn').hasError('maxlength')  && submittedValues==true">
                                                Must be maximum 64 characters long
                                            </div>
                                    </div>
                                </div>
                                <!-- col -->
                                <div class="data-col">
                                    <div class="form-group">
                                        <label>{{'catalog.product.Quantity'| translate}} </label>
                                        <input type="text" class="form-control" appOnlyNumber
                                            placeholder="{{'catalog.product.Quantity'| translate}}"
                                            formControlName="quantity"
                                            [ngClass]="{'validationcolor':user.get('quantity').hasError('required') && user.get('quantity').touched&&submittedValues==true}">
                                        <div class="validation-error"
                                            *ngIf="user.get('quantity').hasError('required') && user.get('quantity').touched&&submittedValues==true">
                                            {{'catalog.Error.QuantityRequired'| translate}}
                                        </div>
                                    </div>
                                </div>
                                <!--Col-->
                                <div class="data-col">
                                    <div class="form-group">
                                        <label>{{'catalog.product.OutofStockStatus'| translate}}
                                        </label>
                                        <select class="custom-select col-12" formControlName="outOfStockStatus"
                                            placeholder="Stock Status"
                                            [ngClass]="{'validationcolor':user.get('outOfStockStatus').hasError('required') && user.get('outOfStockStatus').touched&&submittedValues==true}">
                                            <option value=''>- -Select Status- -</option>
                                            <option *ngFor="let stocklist of stockStatusSandbox.getStockList$ | async"
                                                value={{stocklist.stockStatusId}}>{{stocklist.name}}
                                            </option>
                                        </select>
                                        <div class="validation-error"
                                            *ngIf="user.get('outOfStockStatus').hasError('required') && user.get('outOfStockStatus').touched&&submittedValues==true">
                                            {{'catalog.Error.OutofStockStatusRequired'| translate}}
                                        </div>
                                    </div>
                                </div>

                                <!--Col-->
                                <div class="data-col">
                                    <div class="form-group">
                                        <label class="control-label">{{'catalog.product.DateAvailable'|
                                            translate}}</label>
                                        <mat-form-field class="date-with">
                                            <input matInput [matDatepicker]="picker_dateAvailable"
                                                formControlName="dateAvailable">
                                            <mat-datepicker-toggle matSuffix [for]="picker_dateAvailable">
                                            </mat-datepicker-toggle>
                                            <mat-datepicker #picker_dateAvailable></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="data-col">
                                    <div class="form-group">
                                        <label>{{'catalog.product.Status'| translate}}<sup>*</sup> </label>
                                        <select class="custom-select col-12" formControlName="status"
                                            [ngClass]="{'validationcolor':user.get('status').hasError('required') && user.get('status').touched&&submittedValues==true}">
                                            <option value=''>- -Select Status- -</option>
                                            <option value="1">Enabled</option>
                                            <option value="0">Disabled</option>
                                        </select>
                                        <div class="validation-error"
                                            *ngIf="user.get('status').hasError('required') && user.get('status').touched&&submittedValues==true">
                                            {{'catalog.Error.StatusRequired'| translate}}
                                        </div>
                                    </div>
                                </div>

                                <!--Col-->
                                <div class="data-col">
                                    <div class="form-group">
                                        <label>{{'catalog.product.SortOrder'| translate}}</label>
                                        <input type="text" class="form-control" appOnlyNumber
                                            placeholder="{{'catalog.product.SortOrder'| translate}}"
                                            formControlName="sortOrder">
                                    </div>
                                </div>

                                  <!-- enble pincode or not -->

                                <div class="data-col">
                                    <div class="form-group" style="margin-top:37px">
                                    <div class="custom-control custom-checkbox ">
                                        <input
                                        type="checkbox"
                                        class="custom-control-input "
                                        id="checkbox2"
                                        formControlName="pincodeBasedDelivery"
                                        style="cursor:inherit"/>
                                        <label
                                        class="custom-control-label mail-tooltip"
                                        for="checkbox2">Enable postal code verification for shipping.
                                        <button
                                            type="button"
                                            class="btn"
                                            placement="right"
                                            style="padding: unset"
                                            ngbTooltip="">
                                        </button>
                                        </label>
                                    </div>
                                    </div>
                                </div>
                                <!-- Col -->
                                <div class="data-col">
                                    <div class="form-group">
                                        <label>Manufacturer<sup>*</sup></label>

                                        <select class="custom-select col-12" formControlName="manufacturer"
                                            [ngClass]="{'validationcolor':user.get('manufacturer').hasError('required') && user.get('manufacturer').touched&&submittedValues==true}">
                                            <option value=''>- -Select manufacturer- -</option>
                                            <option *ngFor=" let list of productSandbox.manufacturerList$ | async" value="{{list.manufacturerId}}">{{list.name}}</option>
                                        </select>
                                        <div class="validation-error"
                                            *ngIf="user.get('manufacturer').hasError('required') && user.get('manufacturer').touched&&submittedValues==true">
                                             Manufacturer is required
                                        </div>
                                    </div>
                                </div>

                         </div>
                    </ng-template>
                    </ngb-tab>
                    <!-- Tab2 -->
                    <ngb-tab>
                        <ng-template ngbTabTitle>{{'catalog.product.Images'| translate}}</ng-template>
                        <ng-template ngbTabContent>
                            <div class="flex image-row">
                                <div class="image-col" *ngFor="let data of uploadImage;let i=index">
                                    <div class="img-hdr flex" *ngIf="!editId">
                                        <input type="radio" name="'imageSelection'" [checked]="length==i"
                                            (change)="checkBox($event,i)">
                                        <a href="javascript:void(0)" (click)="deleteImage(i)"> <img
                                                src="assets/img/delete-ico.png"> </a>
                                    </div>
                                    <div class="img-hdr flex" *ngIf="editId">
                                        <input type="radio" name="'imageSelection'"
                                            [checked]="defaultImageValue==data.defaultImage"
                                            (change)="checkBox($event,i)">
                                        <a href="javascript:void(0)" (click)="deleteImage(i)"> <img
                                                src="assets/img/delete-ico.png"> </a>
                                    </div>
                                    <div class="img-bdy">
                                        <img [src]="imageUrls + '?path=' + data.containerName + '&name=' + data.image + '&width=60&height=60'"
                                            style=" width:100%; height:100%">
                                    </div>
                                </div>
                                <!--Col-->
                                <div class="image-col">
                                    <div class="img-dflt">
                                        <input style="cursor: pointer" (click)=" uploadProductImages()">
                                        <img src="assets/img/add-photo-big.png">
                                        <p>{{'catalog.product.Addimages'| translate}}</p>
                                    </div>
                                </div>
                                
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <!-- Tab3 -->
                    <ngb-tab>
                        <ng-template ngbTabTitle>{{'catalog.product.RelatedProducts'| translate}}</ng-template>
                        <ng-template ngbTabContent>
                            <div class="flex categories-row">
                                <div class="categories-col">
                                    <h3>{{'catalog.product.AvailableProducts'| translate}}</h3>
                                    <div class="form-group search-categories">

                                        <form class="example-form">
                                            <mat-form-field class="example-full-width" style="    width: 100%;">
                                                <input type="text" placeholder="" (keyup)="searchProduct($event)"
                                                    matInput>
                                            </mat-form-field>
                                        </form>
                                    </div>
                                    <ul class="flex category-list over-flowx">

                                        <li *ngFor="let product of productSandbox.productList$ | async ;let i=index"
                                            style="cursor: pointer" (click)="selectProduct(product,i)">
                                            <a href="javascript:void(0)"> <img src="assets/img/add-green-ico.png">
                                            </a>
                                          {{ product.name }} - {{product.sku}}
                                        </li>
                                    </ul>
                                </div>
                                <!---->
                                <div class="categories-col">
                                    <h3>{{'catalog.product.SelectedProducts'| translate}}</h3>
                                    <div class="form-group search-categories">

                                        <form class="example-form">
                                            <mat-form-field class="example-full-width" style="    width: 100%;">
                                                <input type="text" placeholder="" aria-label="Assignee" matInput
                                                    (keyup)="searchSelectedCategory($event.target.value)">
                                            </mat-form-field>
                                        </form>

                                        <ul class="flex category-list over-flowx" *ngIf="editId"
                                            style="cursor: pointer">
                                            <span>
                                                <li *ngFor="let data of selectedProducts;let i=index"
                                                    (click)="removeProduct(data,i)">
                                                    <a href="javascript:void(0)">&nbsp;
                                                        <img src="assets/img/minus-red-ico.png"></a>
                                                        {{ data.name }} - {{data.sku}}

                                                </li>
                                            </span>

                                        </ul>
                                        <ul class="flex category-list " *ngIf="!editId" style="cursor: pointer">
                                            <span>
                                                <li *ngFor="let selected of selectedProducts;let i=index"
                                                    (click)="removeProduct(selected,i)">
                                                    <a href="javascript:void(0)">
                                                        <img src="assets/img/minus-red-ico.png"> &nbsp;</a>
                                                        {{ selected.name }} - {{selected.sku}}

                                                </li>
                                            </span>

                                        </ul>

                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </ngb-tab>
                    <!-- Tab4 -->
                  <ngb-tab id="7">
                    <ng-template ngbTabTitle>Variant</ng-template>
                    <ng-template ngbTabContent>
                        <form [formGroup]="variantForm">
        
                      <div class="flex select-variant">
                        <div class="sv-names">
                          <h3>Select variant Names</h3>
                          <ul>
                            <li class="flex selected" *ngFor="let list of productSandbox.variantList$ | async">
                              <a href="javascript:Void(0)" class="flex" [ngClass]="{'icon-disabled': editId && isVariantExist}" (click)="selectVariant(list)"> <img *ngIf="list.selected === true" src="assets/img/add-blue-circle.png">
                                <img *ngIf="list.selected === false " src="assets/img/plus-sign-button.png"> {{list.name}} </a>
                              <span>({{list.type}})</span>
                            </li>
        
                          </ul>
                        </div>
                        <!--lft-->
                        <div class="sv-values">
                          <h3>Variant Values</h3>
                          <div class="table-responsive">
                            <table class="table" *ngIf="(productSandbox.selectedVariant$ | async)?.length > 0">
                              <thead>
                                <tr>
                                  <th>Variant Names</th>
                                  <th>Variant Value 1</th>
                                  <th>Variant Value 2</th>
                                  <th>Variant Value 3</th>
                                  <th>Variant Value 4</th>
                                  <th>Variant Value 5</th>
                                  <th></th>
                                </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let value of productSandbox.selectedVariant$ | async">
                                <td>{{value.name}}</td>
                                <ng-container *ngFor="let item of value.varientsValue">
                                            <td> <input [readonly]="true" type="text" value="{{item.valueName}}"> </td>
                                </ng-container>
                                <ng-container *ngIf="checkLength(value.varientsValue?.length)">
                                    <ng-container *ngFor="let i of emptyVariant">
                                            <td> <input [readonly]="true" type="text" value=""> </td>
                                    </ng-container>
                                </ng-container>
                                <td style="width: 50px"><button> <img src="assets/img/delete.svg" [ngClass]="{'icon-disabled': editId && isVariantExist}" (click)="selectVariant(value)"> </button> </td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <!--rht-->
                      </div>
                      <!--top-->
          
                      <div class="pv-row" *ngIf="(productSandbox.probabiltyOptions$ | async)?.length > 0">
                        <div class="table-responsive">
                          <table class="table">
                            <thead>
                            <tr>
                              <th>Image</th>
                              <th>Options</th>
                              <th>SKU</th>
                              <th>Price</th>
                              <th>Barcode</th>
                              <th>Inventory <img src="assets/img/info-bg-ico.png"> </th>
                              <th width="120px"></th>
                              <th></th>
                            </tr>
                            </thead>
                            <tbody>
           
                            <ng-container formArrayName="variantItems" *ngFor="let options of variantForm.get('variantItems')['controls']; let i = index;">
                            <ng-container [formGroupName]="i">
                            
                              <tr>
                                <td class="text-center">
                                    
                                  <div class="pd-img" *ngIf="optionImageArray[i]?.length > 0">
                                <ng-container *ngFor="let imgItem of optionImageArray[i]">
        
                                    <img width="80px" height="60px" (click)="uploadOptionImage($event, options, i)" [src]="imageUrls + '?path=' + imgItem.containerName + '&name=' + imgItem.image + '&width=60&height=60'">
                                    <button (click)="removeOptionImage(options, i)"><img class="close" src="assets/img/close-white-ico.png"> </button>
                                </ng-container>  
                                </div>
                                  <div class="pd-img-upld" *ngIf="optionImageArray[i]?.length === 0">
                                    <input (click)="uploadOptionImage($event, options, i)">
                                    <a href="javascript:void(0)" class="flex"> <span>+</span> Photo </a>
                                    </div>
        
                                </td>
                                <td >
                                    <ng-container *ngFor="let item of optionValueArray[i]; let j = index">
                                        <span *ngIf="j > 0 && j < optionValueArray[i].length">-</span><span>{{item.value}}</span>
                                    </ng-container>
                                </td>
                                <td style="position: relative"> <input type="text" formControlName="sku">
                                    <ng-container *ngIf="options.get('sku').hasError('required') && submittedValues == true">
                                            <span class="errorMsg">Sku is required</span>
                                    </ng-container>
                                 </td>
                                <td>
                                  <div class="price-imp"> <input type="text" formControlName="price"><button class="price-val">{{currencySymbol.symbol}}</button></div>
                                </td>
                                <td> <input type="text" formControlName="barcode"> </td>
                                <td> <input type="text" formControlName="inventory" appOnlyNumber>
                                    <ng-container *ngIf="options.get('inventory').hasError('required') && submittedValues == true">
                                        <span class="errorMsg">Inventory is required</span>
                                </ng-container>
                                </td>
                                <td>
                                    <div class="toggle">
                                            <input class="tgl tgl-light" id="{{'id'+ i}}" type="checkbox" formControlName="isActive"/>
                                            <label class="tgl-btn" for="{{'id'+ i}}"></label>
                                            Active
                                    </div>                        
                                </td>
                                <td style="width:50px"> <button> <img src="assets/img/delete.svg" (click)="removeProbablityOption(options, i)"> </button> </td>
                              </tr>
                            </ng-container>
                           </ng-container>
        
                            </tbody>
                          </table>
                        </div>
                      </div>
        
                      </form>
          
                    </ng-template>
                  </ngb-tab>
                  <!-- Tab5 -->

                  <ngb-tab *ngIf="editId">
                    <ng-template ngbTabTitle>{{'catalog.product.RatingsReviews'| translate}}</ng-template>
                    <ng-template ngbTabContent>
                        <div class="option-table">
                            <span class="no-data"
                                *ngIf="(productSandbox.gettingRatingList$ | async).length === 0">No rating & reviews
                                found</span>
                            <table class="table-bordered rating-product"
                                *ngIf="(productSandbox.gettingRatingList$ | async).length > 0">

                                <tr>
                                    <th>{{'catalog.product.Image'| translate}}</th>
                                    <th>{{'catalog.product.Name'| translate}}</th>
                                    <th>{{'catalog.product.Rating'| translate}}</th>
                                    <th width="30%">{{'catalog.product.Review'| translate}}</th>
                                    <th>{{'catalog.product.Status'| translate}}</th>
                                    <th></th>
                                </tr>

                                <tr *ngFor="let rating of productSandbox.gettingRatingList$ | async; let i=index">
                                    <td>
                                        <img *ngIf="rating.avatarPath" class="w3-circle" alt="Alps"
                                            style="width: 55px;height: 55px;"
                                            [src]="imageUrls + '?path=' + rating.avatarPath + '&name=' + rating.avatar + '&width=60&height=60'"
                                            (load)="ratingImageLoading(rating.ratingId)"
                                            [hidden]="!ratingImage[rating.ratingId]">
                                        <img src="./assets/img/avatar-img1.png"
                                            [hidden]="ratingImage[rating.ratingId]">
                                    </td>
                                    <td>{{rating.firstName}}{{rating.lastName}}</td>
                                    <td>
                                        <app-rating [ratingValue]="rating.rating"></app-rating>

                                    </td>
                                    <td>{{rating.review}}</td>
                                    <td>
                                        <div class="toggle">
                                            <input class="tgl tgl-light" type="checkbox" id="{{'rat' + rating.ratingId}}"
                                                [(ngModel)]="rating.isActive" [ngModelOptions]="{standalone: true}"
                                                (change)="updateRatingStatus($event,rating)" type="checkbox" />
                                            <label class="tgl-btn" for="{{'rat' + rating.ratingId}}"></label>
                                        </div>
                                    </td>
                                    <td>
                                        <span style="color: #008c00;" *ngIf="rating.isActive == 1">Active</span>
                                        <span style="color: #f00;" *ngIf="rating.isActive == 0">In-Active</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!--Checkbox-->
                    </ng-template>
                </ngb-tab>
                <!-- Tab6 -->
                 
                    <ngb-tab id="8">
                        <ng-template ngbTabTitle>Price</ng-template>
                        <ng-template ngbTabContent>
                            <mat-accordion>
                                <mat-expansion-panel [expanded]="priceValid">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Default Price
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div class="main-content">
                                        <form [formGroup]="priceForm">
                                            <div class="sub-content" style="position: relative">
                                                <label>
                                                    Product Cost<sup style="color: red">*</sup>
                                                </label>
                                                <div class="input-grup price-group">
                                                    <span class="input-group-addon">{{currencySymbol?.symbol}}</span>
                                                    <input class="dark-input" type="text" (keyup)="getPrice($event)"
                                                        (keypress)="numberOnly($event)" formControlName="productPrice">
                                                </div>
                                                <div class="validation-error" style="position: absolute" *ngIf="priceForm.controls['productPrice'].hasError('required') && priceValid">Product cost is required</div>
                                            </div>
                                          
                                            <span class="add-symbol">+</span>
                                            <div class="sub-content">
                                                <label>
                                                    Tax
                                                    <div class="tax-choice">
                                                        <input name="tax" type="radio" value="1" [checked]="taxType === '1'" (change)="getTaxValue($event)"> Value
                                                        <input name="tax" type="radio" value="2" [checked]="taxType === '2'" (change)="getTaxValue($event)"> Percentage
                                                    </div>
                                                </label>
                                                <div _ngcontent-c21="" class="input-grup price-group" *ngIf="taxType === '2'">
                                                    <select _ngcontent-c21="" class="custom-select col-12" [(ngModel)]="currentTaxId" [ngModelOptions]="{standalone: true}" (change)="getTaxPercentage($event.target.value)">
                                                        <option value="">- -Select Tax- -</option>
                                                       <option [value]="array?.taxId" *ngFor="let array of (taxSandbox.taxList$ | async)"> {{array?.title}} - {{array?.value}}</option>
                                                    </select></div>
                                                <div class="input-grup price-group" *ngIf="taxType === '1'">
                                                    <span class="input-group-addon">{{currencySymbol?.symbol}}</span>
                                                    <input class="dark-input" type="text" (keyup)="getTax($event.target.value)" [(ngModel)]="taxValue" [ngModelOptions]="{standalone: true}"
                                                        (keypress)="numberOnly($event)">
                                                </div>
                                            </div>
                                            <span class="add-symbol">=</span>

                                            <div class="sub-content">
                                                <label>
                                                    Total Cost (MRP)
                                                </label>
                                                <div class="input-grup price-group">
                                                    <span class="input-group-addon">{{currencySymbol?.symbol}}</span>
                                                    <input class="dark-input" type="text" readonly
                                                        [(ngModel)]="totalPrice" [ngModelOptions]="{standalone: true}">
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </mat-expansion-panel>
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Discount
                                        </mat-panel-title>
                                        <mat-panel-description>

                                        </mat-panel-description>
                                    </mat-expansion-panel-header>
                                    <div class="discount-main-content">
                                        <form [formGroup]="discountForm">
                                            <div formArrayName="discountItems"
                                                *ngFor="let item of discountForm.get('discountItems')['controls']; let i = index;">
                                                <div [formGroupName]="i">
                                                        <div class="sub-content">
                                                                <label> SKU </label>
                                                                <select class="custom-select col-12" formControlName="discountSku">
                                                                <option value='' selected hidden disabled>- -Select Sku- -</option>
                                                                <option value="{{list}}" *ngFor="let list of productSandbox.skuArrayList$ | async">{{list}}</option>
                                                              </select> 
 
                                                        </div>
                                                    <div class="sub-content">
                                                        <label>
                                                            Priority </label>
                                                        <input class="dark-input form-control" type="text"
                                                            formControlName="discountPriority"> 
                                                    </div>

                                                    <div class="sub-content">
                                                        <label>
                                                            Price
                                                        </label>
                                                        <input class="dark-input form-control" type="text"
                                                            formControlName="discountPrice">
                                                    </div>

                                                    <div class="sub-content" style="margin-right: 35px">
                                                        <label>
                                                            Date Start
                                                        </label>
                                                        <mat-form-field (click)="picker2.open()">
                                                            <input readonly class="input-group"
                                                                formControlName="discountDateStart" type="text" matInput
                                                                [matDatepicker]="picker2" autocomplete="off">
                                                            <mat-datepicker-toggle matSuffix [for]="picker2">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #picker2></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="sub-content">
                                                        <label>
                                                            Date End
                                                        </label>
                                                        <mat-form-field (click)="picker3.open()">
                                                            <input readonly class="input-group"
                                                                formControlName="discountDateEnd" type="text" matInput
                                                                [matDatepicker]="picker3" autocomplete="off">
                                                            <mat-datepicker-toggle matSuffix [for]="picker3">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #picker3></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>
                                                    <img title="Remove discount" class="remove"
                                                        src="assets/img/minus-red-ico-big.png"
                                                        (click)="removeDiscountForm(i)">
                                                </div>
                                            </div>
                                            <div class="add">
                                                <img [matTooltip]="editId ? 'Add more dicount price' : 'you can add discount price while update'" src="assets/img/add-blue-circle.png"
                                                    (click)="addDiscountForm()">
                                            </div>
                                        </form>

                                    </div>

                                </mat-expansion-panel>
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Special
                                        </mat-panel-title>
                                        <mat-panel-description>

                                        </mat-panel-description>
                                    </mat-expansion-panel-header>

                                    <div class="discount-main-content">
                                        <form [formGroup]="specialForm">
                                            <div formArrayName="specialItems"
                                                *ngFor="let item of specialForm.get('specialItems')['controls']; let i = index;">
                                                <div [formGroupName]="i">
                                                    <div class="sub-content">
                                                        <label> SKU </label>
                                                        <select class="custom-select col-12" formControlName="specialSku">
                                                                <option value='' selected hidden disabled>- -Select Sku- -</option>
                                                                <option value="{{list}}" *ngFor="let list of productSandbox.skuArrayList$ | async">{{list}}</option>
                                                        </select> 
                                                                                                           -->
                                                    </div>
                                                    <div class="sub-content">
                                                        <label>
                                                            Priority </label>
                                                        <input class="dark-input form-control" type="text"
                                                            formControlName="specialPriority">
                                                    </div>

                                                    <div class="sub-content">
                                                        <label>
                                                            Price
                                                        </label>
                                                        <input class="dark-input form-control" type="text"
                                                            formControlName="specialPrice">
                                                    </div>

                                                    <div class="sub-content" style="margin-right: 35px">
                                                        <label>
                                                            Date Start
                                                        </label>
                                                        <mat-form-field (click)="picker2.open()">
                                                            <input readonly class="input-group"
                                                                formControlName="specialDateStart" type="text" matInput
                                                                [matDatepicker]="picker2" autocomplete="off">
                                                            <mat-datepicker-toggle matSuffix [for]="picker2">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #picker2></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>

                                                    <div class="sub-content">
                                                        <label>
                                                            Date End
                                                        </label>
                                                        <mat-form-field (click)="picker3.open()">
                                                            <input readonly class="input-group"
                                                                formControlName="specialDateEnd" type="text" matInput
                                                                [matDatepicker]="picker3" autocomplete="off">
                                                            <mat-datepicker-toggle matSuffix [for]="picker3">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #picker3></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>
                                                    <img title="Remove special price" class="remove"
                                                        src="assets/img/minus-red-ico-big.png"
                                                        (click)="removeSpecialForm(i)">
                                                </div>

                                            </div>
                                            <div class="add">
                                                <img [matTooltip]="editId ? 'Add more special price' : 'you can add special price while update'" src="assets/img/add-blue-circle.png"
                                                    (click)="addSpecialForm()">
                                            </div>
                                        </form>

                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>

                        </ng-template>
                    </ngb-tab>
                   
                    <ngb-tab>
                        <ng-template ngbTabTitle>SEO</ng-template>
                        <ng-template ngbTabContent>
                            <form [formGroup]="seoForm">
                                <div class="flex data-row seo-row">
                                    <div class="data-col">
                                        <div class="form-group">
                                            <label>Meta Tag Title
                                                <button type="button" class="btn" placement="right"
                                                    ngbTooltip="Enter an SEO tag title, preferably between 60-70 characters">
                                                    <img src="assets/img/info-ico.png"></button>
                                            </label>
                                            <input type="text" class="form-control" placeholder="Meta Tag Title"
                                                formControlName="metaTagTitle"  [ngClass]="{'validationcolor':seoForm.controls.metaTagTitle.errors}"/>
                                            <div class="validation-error"
                                                *ngIf="seoForm.controls['metaTagTitle'].hasError('required') &&  submittedValues == true">
                                                Meta Tag Title Required
                                            </div>
                                            <div class="validation-error"
                                                *ngIf="seoForm.controls['metaTagTitle'].hasError('maxlength')">
                                                Must be maximum 60 characters long
                                            </div>
                                        </div>
                                    </div>
                                    <div class="data-col">
                                        <div class="form-group">
                                            <label>Meta Tag Keyword
                                                <button type="button" class="btn" placement="right"
                                                    ngbTooltip="Enter meta tag keywords for the product">
                                                    <img src="assets/img/info-ico.png"></button>
                                            </label>
                                            <input type="text" class="form-control" placeholder="Meta Tag Keyword"
                                                formControlName="metaTagKeyword" [ngClass]="{'validationcolor':seoForm.controls.metaTagKeyword.errors}"/>
                                            <div class="validation-error"
                                                *ngIf="seoForm.controls['metaTagKeyword'].hasError('required') &&  submittedValues == true">
                                                Meta Tag Keyword Required
                                            </div>
                                            <div class="validation-error"
                                                *ngIf="seoForm.controls['metaTagKeyword'].hasError('maxlength')">
                                                Must be maximum 255 characters long
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="ap-body-col width100">
                                    <div class="form-group" style="width: 100%;">
                                        <label>Meta Tag Description
                                            <button type="button" class="btn" placement="right"
                                                ngbTooltip="Type a Meta tag description for the product, preferably between 160-170 characters">
                                                <img src="assets/img/info-ico.png"></button>
                                        </label>
                                        <textarea formControlName="metaTagDescription"></textarea>                               
                                        <div class="validation-error"
                                            *ngIf="seoForm.controls['metaTagDescription'].hasError('required') &&  submittedValues == true">
                                            Meta Tag Description Required
                                        </div>
                                        <div class="validation-error"
                                        *ngIf="seoForm.controls['metaTagDescription'].hasError('maxlength')">
                                        Must be maximum 160 characters long
                                       </div>
                                    </div>
                                </div>
                            </form>
                        </ng-template>
                    </ngb-tab>

                    <ngb-tab id="9">
                        <ng-template ngbTabTitle>Shipping</ng-template>
                        <ng-template ngbTabContent>
                          <form [formGroup]="shippingForm">
                            <div class="flex data-row">
                                    <div class="data-col">
                                            <div class="form-group">
                                             <label> Required Shipping </label>
                                            <mat-radio-group aria-label="Select an option" formControlName="requiredShipping">
                                                <mat-radio-button value="0">Free</mat-radio-button>
                                                <mat-radio-button value="1">Paid</mat-radio-button>
                                            </mat-radio-group>
                                            </div>
                                    </div>
                                <div class="data-col">
                                    <div class="form-group">
                                        <label> Width </label>
                                        <input type="text" class="form-control" appOnlyNumber placeholder="width" formControlName="width">
                                       <div class="validation-error" *ngIf="shippingForm.controls['width'].hasError('required') && shippingValid">Width is required</div>
                                    </div>
                                </div>

                                <div class="data-col">
                                    <div class="form-group">
                                        <label> Height </label>
                                        <input type="text" class="form-control" appOnlyNumber placeholder="height" formControlName="height">
                                        <div class="validation-error" *ngIf="shippingForm.controls['height'].hasError('required') && shippingValid">Height is required</div>

                                    </div>
                                </div>

                                <div class="data-col">
                                    <div class="form-group">
                                        <label>Length</label>
                                        <input type="text" class="form-control" appOnlyNumber placeholder="length" formControlName="length">
                                        <div class="validation-error" *ngIf="shippingForm.controls['length'].hasError('required') && shippingValid">Length is required</div>

                                    </div>
                                </div>

                                <div class="data-col">
                                    <div class="form-group">
                                        <label> Weight </label>
                                        <input type="text" class="form-control" appOnlyNumber placeholder="weight" formControlName="weight">
                                        <div class="validation-error" *ngIf="shippingForm.controls['weight'].hasError('required') && shippingValid">Weight is required</div>

                                    </div>
                                </div>
                                <!--Col-->
                            </div>
                         </form>
                        </ng-template>
                    </ngb-tab>

                    <!-- Tier Price -->
                    <ngb-tab>
                        <ng-template ngbTabTitle>Manage Tier Price</ng-template>
                         <ng-template ngbTabContent>
                            <div class="option-table">
                              <div class="add-discount" *ngIf="user.controls['tierForm'].disabled">
                                <a href="javascript:void(0)" [matTooltip]="editId ? 'Add tire price' : 'you can add tire price while update'" (click)='addTierForm()'>
                                  <img src="assets/img/add-blue-circle-big.png"></a>
                              </div>
                               <div formGroupName="tierForm" *ngIf="user.controls['tierForm'].enabled">
                                <div class="form-row" style="margin-top: 20px;">
                                  <span class="form-lft" >Do you want to activate this price?</span>
                                  <label class="switch">
                                        <mat-radio-group aria-label="Select an option" formControlName="hasTire">
                                                <mat-radio-button value="1">Yes</mat-radio-button>
                                                <mat-radio-button value="0">No</mat-radio-button>
                                        </mat-radio-group>
                                </label>
                                </div>  
                                <div formArrayName='tierFormArray'>
                                        <table>
                                            <tr>
                                                <th style="width: 250px">SKU</th>
                                               <th style="width: 335px">Quantity</th>
                                               <th>Price<span style="color: grey">(per product)</span></th>
                                            </tr>
                                        </table>
                                <div *ngFor='let group of tierArray["controls"]; let i=index;'>
                                <div [formGroupName]='i'>
                                    <tr>
                                            <td style="width: 250px">
                                                    <div class="form-group flex">
                                                            <select class="custom-select col-12" formControlName="skuName">
                                                                    <option value='' selected hidden disabled>- -Select Sku- -</option>
                                                                    <option value="{{list}}" *ngFor="let list of productSandbox.skuArrayList$ | async">{{list}}</option>
                                                            </select>
                                                    </div>
                                            </td>
                                        <td>
                                            <div class="form-group flex">
                                                <input type="text" min="1" class="tier-inp form-control" appOnlyNumber placeholder="quantity" formControlName="quantity"><span style="padding: 7px">and above</span>
                                            </div>
                                        </td>
                                        <td style="padding-left: 5px"> 
                                            <div class="form-group">
                                                <input type="text"  appOnlyNumber class="tier-inp form-control" placeholder="price" formControlName="price">
                                            </div>
                                        </td>
                                        <td class="text-center" style="padding-left: 5px; padding-bottom: 15px">
                                                <a href="javascript:void(0)" (click)='deleteTierForm(i)'>
                                                    <img src="assets/img/minus-red-ico-big.png"> </a>
                                        </td>
                                    </tr>
                                </div>
                                </div>
                                </div>
                               </div>
                               <td class="text-center" style="float: right;margin-right: 220px;" *ngIf="user.controls['tierForm'].enabled">
                                    <a href="javascript:void(0)" (click)='addTierForm()'>
                                        <img src="assets/img/add-blue-circle-big.png"></a>
                                </td>
                            </div>
                       </ng-template>
                     </ngb-tab> 
                                           <!-- Attributes-->
                    <ngb-tab>
                        <ng-template ngbTabTitle>Attributes</ng-template>
                         <ng-template ngbTabContent>
                            <div class="option-table">
                              <div class="add-discount" *ngIf="user.controls['attributeForm'].disabled">
                                <a href="javascript:void(0)" title="Add Rappel Price" (click)='addAttributeForm()'>
                                  <img src="assets/img/add-blue-circle-big.png"></a>
                              </div>
                               <div formGroupName="attributeForm" *ngIf="user.controls['attributeForm'].enabled">
                 
                                <div formArrayName='attributeFormArray'>
                                        <table>
                                            <tr>
                                               <th style="width: 380px">Attribute</th>
                                               <th>Text</th>
                                            </tr>
                                        </table>
                                <div *ngFor='let group of attributeArray["controls"]; let i=index;'>
                                <div [formGroupName]='i'>
                                    <tr>
                                        <td>
                                            <div class="form-group flex">
                                                <select name="cars" id="cars" class="tier-inp form-control" formControlName="attributeId">
                                                    <optgroup label="{{list.attributeGroupName}}" *ngFor="let list of attributeGroupSandbox.attributeGroupList$ | async">
                                                      <option value="{{attr.attributeId}}" *ngFor="let attr of list.attribute">{{attr.attributeName}}</option>
                                                    </optgroup>
                                        
                                                  </select>
                                            </div>
                                        </td>
                                        <td style="padding-left: 5px"> 
                                            <div class="form-group">
                                                <textarea class="tier-inp form-control" placeholder="Enter text here..." formControlName="text"></textarea>
                                            </div>
                                        </td>
                                        <td class="text-center" style="padding-left: 5px; padding-bottom: 15px">
                                                <a href="javascript:void(0)" (click)='deleteAttributeForm(i)'>
                                                    <img src="assets/img/minus-red-ico-big.png"> </a>
                                        </td>
                                    </tr>
                                </div>
                                </div>
                                </div>
                               </div>
                               <td class="text-center" style="float: right;margin-right: 303px;" *ngIf="user.controls['attributeForm'].enabled">
                                    <a href="javascript:void(0)" (click)='addAttributeForm()'>
                                        <img src="assets/img/add-blue-circle-big.png"></a>
                                </td>
                            </div>
                       </ng-template>
                     </ngb-tab> 
                    
                </ngb-tabset>

            </div>
        </div>
    </div>
</form>
